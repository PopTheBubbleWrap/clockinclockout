#!/bin/bash

write_time() {
  now=$(date +"%s")
  file_name=$(date +"%F").txt
#  echo "$1 $now" >> ~/bin/clockinclockout/$file_name
  echo "$1 $now" >> ./clockinclockout/$file_name
}

calculate_time() {
  clockLog=./clockinclockout/$(date +"%F").txt
  if test -f "$clockLog"; then
    lastClockedIn=0
    lastClockedout=0
    while read line; do
      read -a clocked_arr <<< "$line"
      if [ ${clocked_arr[0]} == "ci" ]; then
        lastClockedIn=${clocked_arr[1]}
      fi
      if [ ${clocked_arr[0]} == "co" ]; then
        lastClockedOut=${clocked_arr[1]}
      fi
    done < $clockLog
    if [ lastClockedIn > lastClockedOut ]; then
      lastClockedOut=$(date +"%s")
    fi
    echo $((lastClockedOut-lastClockedIn))
  else
    return 0
  fi
}
